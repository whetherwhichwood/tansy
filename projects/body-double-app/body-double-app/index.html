<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body Double Virtual Space</title>
    <meta name="description" content="A digital platform for ADHD and autistic individuals to work alongside virtual companions for increased focus and productivity.">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Loading screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h2>Setting up your focus space...</h2>
                <p>Creating a supportive environment for your productivity</p>
            </div>
        </div>

        <!-- Main app content -->
        <div id="main-app" class="main-app hidden">
            <!-- Header -->
            <header class="app-header">
                <div class="header-content">
                    <div class="logo">
                        <span class="logo-icon">ü§ù</span>
                        <span class="logo-text">Body Double</span>
                    </div>
                    <div class="user-info">
                        <span id="user-name" class="user-name">Welcome!</span>
                        <button id="settings-btn" class="btn-icon" aria-label="Settings">‚öôÔ∏è</button>
                    </div>
                </div>
            </header>

            <!-- Main content area -->
            <main class="app-main">
                <!-- Session setup -->
                <section id="session-setup" class="session-setup">
                    <div class="setup-card">
                        <h2>Start Your Focus Session</h2>
                        <p class="setup-subtitle">Choose your virtual companion and set your goals</p>
                        
                        <div class="session-options">
                            <div class="option-group">
                                <label for="session-type">Session Type</label>
                                <select id="session-type" class="form-select">
                                    <option value="solo">Solo with Avatar</option>
                                    <option value="group">Silent Group Room</option>
                                    <option value="one-on-one">1:1 Co-working</option>
                                </select>
                            </div>

                            <div class="option-group">
                                <label for="session-duration">Duration</label>
                                <select id="session-duration" class="form-select">
                                    <option value="15">15 minutes</option>
                                    <option value="25" selected>25 minutes (Pomodoro)</option>
                                    <option value="45">45 minutes</option>
                                    <option value="60">1 hour</option>
                                    <option value="90">1.5 hours</option>
                                    <option value="120">2 hours</option>
                                </select>
                            </div>

                            <div class="option-group">
                                <label for="task-description">What are you working on?</label>
                                <textarea id="task-description" class="form-textarea" placeholder="Describe your task or goal for this session..."></textarea>
                            </div>

                            <div class="option-group">
                                <label for="avatar-selection">Choose Your Companion</label>
                                <div class="avatar-grid" id="avatar-grid">
                                    <!-- Avatars will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <button id="start-session-btn" class="btn-primary btn-large">
                            <span class="btn-icon">üöÄ</span>
                            Start Focus Session
                        </button>
                    </div>
                </section>

                <!-- Active session -->
                <section id="active-session" class="active-session hidden">
                    <div class="session-header">
                        <div class="session-info">
                            <h3 id="session-task">Working on your task...</h3>
                            <div class="session-timer">
                                <span id="timer-display">25:00</span>
                                <div class="timer-progress">
                                    <div id="timer-bar" class="timer-bar"></div>
                                </div>
                            </div>
                        </div>
                        <div class="session-controls">
                            <button id="pause-btn" class="btn-icon">‚è∏Ô∏è</button>
                            <button id="stop-btn" class="btn-icon">‚èπÔ∏è</button>
                        </div>
                    </div>

                    <div class="virtual-companion">
                        <div id="companion-avatar" class="companion-avatar">
                            <div class="avatar-placeholder">üë§</div>
                        </div>
                        <div class="companion-status">
                            <span id="companion-status">Your companion is working alongside you</span>
                        </div>
                    </div>

                    <div class="session-stats">
                        <div class="stat">
                            <span class="stat-label">Focus Streak</span>
                            <span id="focus-streak" class="stat-value">0 days</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Sessions Today</span>
                            <span id="sessions-today" class="stat-value">0</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Total Time</span>
                            <span id="total-time" class="stat-value">0h 0m</span>
                        </div>
                    </div>
                </section>

                <!-- Session complete -->
                <section id="session-complete" class="session-complete hidden">
                    <div class="completion-card">
                        <div class="completion-icon">üéâ</div>
                        <h2>Great Job!</h2>
                        <p class="completion-message">You completed your focus session</p>
                        
                        <div class="completion-stats">
                            <div class="stat">
                                <span class="stat-label">Session Duration</span>
                                <span id="completed-duration" class="stat-value">25:00</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Focus Level</span>
                                <span id="focus-level" class="stat-value">Good</span>
                            </div>
                        </div>

                        <div class="completion-actions">
                            <button id="start-new-session" class="btn-primary">Start New Session</button>
                            <button id="view-progress" class="btn-secondary">View Progress</button>
                        </div>
                    </div>
                </section>
            </main>

            <!-- Footer -->
            <footer class="app-footer">
                <div class="footer-content">
                    <p>Designed for ADHD and autistic individuals</p>
                    <div class="footer-links">
                        <a href="#" id="help-link">Help</a>
                        <a href="#" id="privacy-link">Privacy</a>
                        <a href="#" id="about-link">About</a>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Scripts - Load in dependency order -->
    <script src="js/analytics.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/session-manager.js"></script>
    <script src="js/avatar-system.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
